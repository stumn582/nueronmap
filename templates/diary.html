{% extends "base.html" %}
{% block content %}
<div class="diary-container">
    <div class="diary-card">

        <h2>ğŸ“ ê°ì • ì¼ê¸°</h2>

        <form action="/diary/analyze" method="post" class="diary-form">
            <textarea name="diary" placeholder="ì˜¤ëŠ˜ í•˜ë£¨ë¥¼ ì ì–´ë³´ì„¸ìš”...">{{ diary if diary else "" }}</textarea>
            <button type="submit" class="btn">ê°ì • ë¶„ì„í•˜ê¸°</button>
        </form>

        {% if result %}
        <div class="result-card">
            <h3>
                ì˜¤ëŠ˜ì˜ ê°ì •:
                {% if result['dominant'] == 'POSITIVE' %} ğŸ˜Š ê¸ì •
                {% elif result['dominant'] == 'NEGATIVE' %} ğŸ˜ ë¶€ì •
                {% elif result['dominant'] == 'NEUTRAL' %} ğŸ˜ ì¤‘ë¦½
                {% else %} í˜¼í•©
                {% endif %}
            </h3>

            {% if result['score'] %}
            {% for key, value in result['score'].items() %}
            <div class="bar-row">
                <span class="label">
                    {% if key == 'POSITIVE' %}ê¸ì •
                    {% elif key == 'NEGATIVE' %}ë¶€ì •
                    {% elif key == 'NEUTRAL' %}ì¤‘ë¦½
                    {% else %}í˜¼í•©
                    {% endif %}
                </span>

                <div class="bar-bg">
                    <div class="bar-fill {% if result['dominant'] and key == result['dominant'] %}active{% endif %}"
                         style="width: {{ (value * 100) | round(0) }}%"></div>
                </div>

                <span class="percent">
                    {{ (value * 100) | round(0) }}%
                </span>
            </div>
            {% endfor %}
            {% endif %}
        </div>
        {% endif %}

    </div>
</div>
{% endblock %}

